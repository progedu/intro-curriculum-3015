"use strict";var http=require("http"),pug=require("pug"),server=http.createServer(function(e,r){var t=new Date;switch(console.info("["+t+"] Requested by "+e.connection.remoteAddress),r.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),e.method){case"GET":"/enquetes/yaki-shabu"===e.url?r.write(pug.renderFile("./form.pug",{path:e.url,firstItem:"焼き肉",secondItem:"しゃぶしゃぶ"})):"/enquetes/rice-bread"===e.url?r.write(pug.renderFile("./form.pug",{path:e.url,firstItem:"ごはん",secondItem:"パン"})):"/enquetes/sushi-pizza"===e.url&&r.write(pug.renderFile("./form.pug",{path:e.url,firstItem:"寿司",secondItem:"ピザ"})),r.end();break;case"POST":var n="";e.on("data",function(e){n+=e}).on("end",function(){var e=decodeURIComponent(n);console.info("["+t+"] 投稿: "+e),r.write('<!DOCTYPE html><html lang="ja"><body><h1>'+e+"が投稿されました</h1></body></html>"),r.end()})}}).on("error",function(e){console.error("["+new Date+"] Server Error",e)}).on("clientError",function(e){console.error("["+new Date+"] Client Error",e)}),port=8e3;server.listen(port,function(){console.info("["+new Date+"] Listening on "+port)});